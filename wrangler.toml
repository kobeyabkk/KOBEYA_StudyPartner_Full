name = "kobeyabkk-studypartner"
pages_build_output_dir = "dist"
compatibility_date = "2024-10-01"
compatibility_flags = ["nodejs_compat"]

[[d1_databases]]
binding = "DB"
database_name = "kobeya-logs-db"
database_id = "b5ac684a-2536-496a-916f-c2c5816a13a0"

[[kv_namespaces]]
binding = "KV"
id = "4ba8baa37cb94b9fac7e28792bb81a1a"

[vars]
WEBHOOK_SECRET = "kobeya-dev-secret-2024"
VERSION = "1.0.0"

# Hybrid Validator Configuration
LLM_ENABLED = "false"  # Start with disabled, enable after testing
LLM_PROVIDER = "openai"  # or "anthropic"
LLM_MODEL = "gpt-4o-mini"  # or "claude-3-haiku-20240307"
LLM_TIMEOUT = "10000"  # 10 seconds
LLM_MAX_RETRIES = "2"
ENABLE_SAMPLING = "true"  # Only call LLM for X% of cases during testing
SAMPLING_RATE = "0.05"  # 5% sampling rate
CACHE_TTL = "3600000"  # 1 hour cache

# Note: LLM_API_KEY should be set via wrangler secret:
# wrangler secret put LLM_API_KEY
