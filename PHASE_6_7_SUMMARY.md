# Phase 6.7: Grammar Category Diversity Manager - å®Œå…¨å®Ÿè£…ãƒ¬ãƒãƒ¼ãƒˆ

## ğŸ¯ å•é¡Œã®ç‰¹å®š

### ãƒ¦ãƒ¼ã‚¶ãƒ¼å ±å‘Š
```
ä»Šæ—¥ä½•å›ã‹ã‚„ã£ã¦ã„ã¦ã€åŠ©å‹•è©ã‚‚ã—ãã¯beå‹•è©ã‚’é¸ã¶å•é¡Œã—ã‹è¦‹ã¦ã„ãªã„ã‚ˆã†ãªæ°—ãŒã—ã¾ã™ã€‚

5ç´šã‹ã‚‰æº–2ç´šã¾ã§è¦‹ã¦ã€ä¸€åº¦ã‚‚å‰ç½®è©ã¯èã‹ã‚ŒãŸã“ã¨ãŒãªã„ã§ã™ã—ã€
ingã€have toã€ç–‘å•è©ã€ä¸å®šè©ã€å‹•åè©ã€æ¥ç¶šè©ã‚‚è¦‹ã¦ã„ã¾ã›ã‚“ã€‚
```

### å®Ÿéš›ã®å•é¡Œä¾‹
```
Q1: I _____ study for it today.
é¸æŠè‚¢: will, can, am, did  â† å…¨ã¦ã€ŒåŠ©å‹•è©/beå‹•è©ã€

Q2: What _____ you do yesterday?
é¸æŠè‚¢: did, do, does, will  â† å…¨ã¦ã€Œç–‘å•æ–‡ã®åŠ©å‹•è©ã€

Q3: What time _____ you eat breakfast yesterday?
é¸æŠè‚¢: did, do, were, are  â† å…¨ã¦ã€ŒåŠ©å‹•è©/beå‹•è©ã€

Q4: What _____ you do last weekend?
é¸æŠè‚¢: did, do, does, will  â† å…¨ã¦ã€Œç–‘å•æ–‡ã®åŠ©å‹•è©ã€
```

### æ ¹æœ¬åŸå› 
- **Phase 6.5ã§ã¯ã€Œæ­£è§£ã®åˆ†æ•£ã€ã®ã¿ç®¡ç†**ï¼ˆdid, will, doãªã©ï¼‰
- **ã€Œå•é¡Œã®æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼ã€ã®åˆ†æ•£ã¯ç®¡ç†ã•ã‚Œã¦ã„ãªã„**
- LLMãŒåŠ©å‹•è©/beå‹•è©ã®å•é¡Œã°ã‹ã‚Šç”Ÿæˆã—ã¦ã—ã¾ã†

---

## âœ… å®Ÿè£…å†…å®¹

### 1. `GrammarCategoryDiversityManager` ã®æ–°è¦ä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `src/eiken/services/grammar-category-diversity-manager.ts` (11.3KB, 365è¡Œ)

#### æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®å®šç¾©ï¼ˆ10ç¨®é¡ï¼‰

```typescript
export type GrammarCategory = 
  | 'modal_verb'          // åŠ©å‹•è©: can, will, should, must, may, would, could
  | 'be_verb'             // beå‹•è©: am, is, are, was, were
  | 'general_verb'        // ä¸€èˆ¬å‹•è©: play, go, study, etc.
  | 'wh_question'         // ç–‘å•è©: what, where, when, who, why, how
  | 'progressive'         // é€²è¡Œå½¢: be + -ing
  | 'to_infinitive'       // ä¸å®šè©: to + verb
  | 'gerund'              // å‹•åè©: -ing (åè©çš„)
  | 'conjunction'         // æ¥ç¶šè©: because, when, if, but
  | 'comparative'         // æ¯”è¼ƒ: -er, more, most
  | 'other';              // ãã®ä»–
```

#### åˆ†æ•£ç®¡ç†ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

##### ğŸš« ã‚«ãƒ†ã‚´ãƒªãƒ¼å›é¿ãƒ­ã‚¸ãƒƒã‚¯ (`shouldAvoidCategory`)

1. **é€£ç¶šãƒã‚§ãƒƒã‚¯** (`MAX_CONSECUTIVE = 2`)
   - åŒã˜ã‚«ãƒ†ã‚´ãƒªãƒ¼ãŒ2å›é€£ç¶šã—ãŸã‚‰å›é¿
   - ä¾‹: `[modal_verb, modal_verb]` â†’ æ¬¡ã« `modal_verb` ã‚’å›é¿

2. **é »åº¦ãƒã‚§ãƒƒã‚¯** (`RECENT_WINDOW = 5, MAX_FREQUENCY = 50%`)
   - ç›´è¿‘5å•ã§åŒã˜ã‚«ãƒ†ã‚´ãƒªãƒ¼ãŒ50%è¶…ãˆãŸã‚‰å›é¿
   - ä¾‹: `[modal, modal, be, modal]` â†’ 60%ãªã®ã§ `modal_verb` ã‚’å›é¿

3. **ãƒ–ãƒ©ãƒƒã‚¯ãƒªã‚¹ãƒˆ** (`BLACKLIST_WINDOW = 3`)
   - ç›´è¿‘3å•ä¸­2å•ä»¥ä¸ŠãŒåŒã˜ã‚«ãƒ†ã‚´ãƒªãƒ¼ãªã‚‰å›é¿

##### ğŸ” ã‚«ãƒ†ã‚´ãƒªãƒ¼æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯ (`detectGrammarCategory`)

å„ªå…ˆåº¦é †ã«ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒãƒãƒ³ã‚°:

```typescript
// 1. ç–‘å•è©ãƒã‚§ãƒƒã‚¯ï¼ˆæ–‡é ­ï¼‰
if (text.startsWith('what')) return 'wh_question';

// 2. åŠ©å‹•è©ãƒã‚§ãƒƒã‚¯ï¼ˆé¸æŠè‚¢ã«2ã¤ä»¥ä¸Šï¼‰
if (choices includes ['can', 'will']) return 'modal_verb';

// 3. beå‹•è©ãƒã‚§ãƒƒã‚¯ï¼ˆé¸æŠè‚¢ã«2ã¤ä»¥ä¸Šï¼‰
if (choices includes ['am', 'is', 'are']) return 'be_verb';

// 4. é€²è¡Œå½¢ãƒã‚§ãƒƒã‚¯
if (text.includes('is studying')) return 'progressive';

// 5. ä¸å®šè©ãƒã‚§ãƒƒã‚¯
if (text.includes('to play')) return 'to_infinitive';

// 6. æ¥ç¶šè©ãƒã‚§ãƒƒã‚¯
if (choices.includes('because')) return 'conjunction';

// ... ãã®ä»–
```

##### ğŸ’¬ LLMãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ (`getCategoryDiversityInstruction`)

```
âš ï¸ GRAMMAR CATEGORY DIVERSITY REQUIREMENT:
Recent grammar categories: [åŠ©å‹•è©, åŠ©å‹•è©, beå‹•è©, åŠ©å‹•è©, beå‹•è©]
HIGH FREQUENCY CATEGORIES: "åŠ©å‹•è© (can/will/should)" (3å›), "beå‹•è©" (2å›)

ğŸ¯ YOUR TASK:
- Create questions with DIFFERENT grammar focus
- Avoid these over-used categories: åŠ©å‹•è©, beå‹•è©
- Examples of diverse categories:
  â€¢ Wh-questions (What/Where/When/Who)
  â€¢ General verbs (past/present/future tense verbs)
  â€¢ Progressive forms (is/are + -ing)
  â€¢ To-infinitives (want to, like to)
  â€¢ Conjunctions (because, when, if)
  â€¢ Comparatives (bigger, better, more)
```

---

### 2. APIçµ±åˆ: `/api/eiken/generate`

#### å®Ÿè£…ãƒ•ãƒ­ãƒ¼

```typescript
// âœ… Phase 6.7 ã®å¤‰æ›´ç‚¹

// 1. æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚’åˆæœŸåŒ–
const categoryManager = new GrammarCategoryDiversityManager(db);
await categoryManager.initializeSession(sessionId, grade);

// 2. å•é¡Œç”Ÿæˆãƒ«ãƒ¼ãƒ—
while (generated.length < count && attempts < maxAttempts) {
  
  // 2-1. æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ†æ•£ã®æŒ‡ç¤ºã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«è¿½åŠ 
  const categoryInstruction = categoryManager.getCategoryDiversityInstruction(sessionId);
  
  // 2-2. å•é¡Œç”Ÿæˆï¼ˆPhase 6.5ã®æŒ‡ç¤ºã‚‚å«ã‚€ï¼‰
  const question = await generateSingleQuestion(
    ..., 
    diversityInstruction + categoryInstruction
  );
  
  // 2-3. æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’è‡ªå‹•æ¤œå‡º
  const detectedCategory = categoryManager.detectGrammarCategory(
    question.questionText,
    question.choices
  );
  
  // 2-4. ã‚«ãƒ†ã‚´ãƒªãƒ¼ãŒåã£ã¦ã„ãªã„ã‹ãƒã‚§ãƒƒã‚¯
  if (categoryManager.shouldAvoidCategory(sessionId, detectedCategory)) {
    console.log(`âš ï¸ Grammar category diversity check failed for: "${detectedCategory}"`);
    rejected++;
    continue;  // â† å†ç”Ÿæˆ
  }
  
  // 2-5. ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’è¨˜éŒ²
  await categoryManager.recordCategory(sessionId, detectedCategory, grade);
  generated.push(question);
}

// 3. çµ±è¨ˆæƒ…å ±ã‚’ãƒ­ã‚°å‡ºåŠ›
const categoryStats = categoryManager.getStatistics(sessionId);
console.log(`ğŸ“š Grammar category stats:`, categoryStats);
```

---

## ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### BEFORE (Phase 6.5 ã®ã¿)
```
Q1: will âœ…  (åŠ©å‹•è©)
Q2: did âœ…   (åŠ©å‹•è© - ç–‘å•æ–‡)
Q3: did âœ…   (åŠ©å‹•è© - ç–‘å•æ–‡) â† åã‚Š
Q4: did âœ…   (åŠ©å‹•è© - ç–‘å•æ–‡) â† åã‚Š

ã‚«ãƒ†ã‚´ãƒªãƒ¼çµ±è¨ˆ: åŠ©å‹•è© (100%)
```

### AFTER (Phase 6.7 å®Ÿè£…å¾Œ)
```
Q1: will âœ…          (åŠ©å‹•è©)
Q2: did âœ…           (åŠ©å‹•è© - ç–‘å•æ–‡)
Q3: playing âœ…       (é€²è¡Œå½¢) â† åˆ†æ•£ï¼
Q4: to study âœ…      (ä¸å®šè©) â† åˆ†æ•£ï¼
Q5: because âœ…       (æ¥ç¶šè©) â† åˆ†æ•£ï¼
Q6: Where âœ…         (ç–‘å•è©) â† åˆ†æ•£ï¼
Q7: bigger âœ…        (æ¯”è¼ƒç´š) â† åˆ†æ•£ï¼
Q8: goes âœ…          (ä¸€èˆ¬å‹•è©) â† åˆ†æ•£ï¼

ã‚«ãƒ†ã‚´ãƒªãƒ¼çµ±è¨ˆ: 
  - åŠ©å‹•è© (25%)
  - é€²è¡Œå½¢ (12.5%)
  - ä¸å®šè© (12.5%)
  - æ¥ç¶šè© (12.5%)
  - ç–‘å•è© (12.5%)
  - æ¯”è¼ƒç´š (12.5%)
  - ä¸€èˆ¬å‹•è© (12.5%)
```

### æ”¹å–„ãƒã‚¤ãƒ³ãƒˆ

1. âœ… **ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®åã‚Šã‚’è§£æ¶ˆ**
   - åŠ©å‹•è©/beå‹•è©ãŒ3å›é€£ç¶šã§å‡ºç¾ã—ãªã„
   - ç›´è¿‘5å•ã§ç‰¹å®šã‚«ãƒ†ã‚´ãƒªãƒ¼ãŒ50%ã‚’è¶…ãˆãªã„

2. âœ… **å¤šæ§˜ãªæ–‡æ³•é …ç›®ã®å­¦ç¿’**
   - ä¸å®šè©ã€å‹•åè©ã€æ¥ç¶šè©ã€æ¯”è¼ƒç´šãªã©ã‚‚å‡ºé¡Œ
   - å®Ÿéš›ã®è‹±æ¤œè©¦é¨“ã«è¿‘ã„å¤šæ§˜æ€§

3. âœ… **å­¦ç¿’åŠ¹æœã®å‘ä¸Š**
   - å¹…åºƒã„æ–‡æ³•é …ç›®ã‚’ãƒãƒ©ãƒ³ã‚¹ã‚ˆãå­¦ç¿’
   - åã£ãŸå­¦ç¿’ã«ã‚ˆã‚‹çŸ¥è­˜ã®ç©´ã‚’é˜²ã

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤çŠ¶æ³

### ã‚³ãƒŸãƒƒãƒˆæƒ…å ±
- **ã‚³ãƒŸãƒƒãƒˆID**: `7f50638`
- **ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: `feat(eiken): Phase 6.7 - Grammar Category Diversity Manager (alternative implementation)`
- **ãƒ–ãƒ©ãƒ³ãƒ**: `main`
- **ãƒªãƒ¢ãƒ¼ãƒˆ**: `origin/main` (pushed âœ…)

### å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«
- âœ… `src/eiken/services/grammar-category-diversity-manager.ts` (æ–°è¦ä½œæˆ, 365è¡Œ)
- âœ… `src/eiken/routes/generate.ts` (æ—¢ã«çµ±åˆæ¸ˆã¿)

### ãƒ‡ãƒ—ãƒ­ã‚¤URL
- æœ¬ç•ªç’°å¢ƒ: **https://kobeyabkk-studypartner.pages.dev/eiken/practice**
- API: **https://kobeyabkk-studypartner.pages.dev/api/eiken/generate**

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæ–¹æ³•

### 1. æ–°ã—ã„å•é¡Œã‚’10å•ç”Ÿæˆ

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ https://kobeyabkk-studypartner.pages.dev/eiken/practice ã‚’é–‹ã
2. **ã€Œ4ç´šã€**ã‚’é¸æŠ
3. **ã€Œæ–‡æ³•ç©´åŸ‹ã‚ (grammar_fill)ã€**ã‚’é¸æŠ
4. **ã€Œæ–°ã—ã„å•é¡Œã‚’ç”Ÿæˆã€**ãƒœã‚¿ãƒ³ã‚’10å›ã‚¯ãƒªãƒƒã‚¯
5. å„å•é¡Œã®æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’ç¢ºèª

### 2. æœŸå¾…ã•ã‚Œã‚‹çµæœ

```
âœ… æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼ãŒå¤šæ§˜
   ä¾‹: åŠ©å‹•è©ã€beå‹•è©ã€é€²è¡Œå½¢ã€ä¸å®šè©ã€æ¥ç¶šè©ã€ç–‘å•è©ãªã©

âŒ åŒã˜ã‚«ãƒ†ã‚´ãƒªãƒ¼ãŒ3å›é€£ç¶šã—ãªã„
   ä¾‹: åŠ©å‹•è©ã€åŠ©å‹•è©ã€åŠ©å‹•è© â† ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ç™ºç”Ÿã—ãªã„

ğŸ“Š çµ±è¨ˆæƒ…å ±ï¼ˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ï¼‰
   ä¾‹: {
     "åŠ©å‹•è© (can/will/should)": 3,
     "ä¸€èˆ¬å‹•è© (play/go/study)": 2,
     "é€²è¡Œå½¢ (-ing)": 2,
     "ä¸å®šè© (to + verb)": 1,
     "æ¥ç¶šè© (because/when/if)": 1,
     "ç–‘å•è© (what/where/when)": 1
   }
```

---

## ğŸ“ Technical Details

### ã‚«ãƒ†ã‚´ãƒªãƒ¼æ¤œå‡ºã®å„ªå…ˆé †ä½

1. **ç–‘å•è©** - æ–‡é ­ã«æ¥ã‚‹ãŸã‚æœ€å„ªå…ˆ
2. **åŠ©å‹•è©** - é¸æŠè‚¢ã«2ã¤ä»¥ä¸Šã®åŠ©å‹•è©
3. **beå‹•è©** - é¸æŠè‚¢ã«2ã¤ä»¥ä¸Šã®beå‹•è©
4. **é€²è¡Œå½¢** - "is studying", "are playing" ãªã©
5. **ä¸å®šè©** - "to play", "to go" ãªã©
6. **æ¥ç¶šè©** - "because", "when", "if" ãªã©
7. **æ¯”è¼ƒç´š** - "bigger", "better", "more" ãªã©
8. **å‹•åè©** - "like playing", "enjoy reading" ãªã©
9. **ä¸€èˆ¬å‹•è©** - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
10. **ãã®ä»–** - è©²å½“ãªã—

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

- ãƒ¡ãƒ¢ãƒªç®¡ç†: ç›´è¿‘20å•ã®ã¿ä¿æŒ
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—: 1æ™‚é–“ä»¥ä¸ŠçµŒéã—ãŸã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’è‡ªå‹•å‰Šé™¤
- é«˜é€Ÿæ¤œå‡º: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®è»½é‡ãƒãƒƒãƒãƒ³ã‚°

---

## ğŸ”„ æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆ

### Phase 6.5 (Answer Diversity) ã¨ã®é–¢ä¿‚

| Phase | ç®¡ç†å¯¾è±¡ | ä¾‹ | ç›®çš„ |
|-------|---------|-----|------|
| **Phase 6.5** | æ­£è§£é¸æŠè‚¢ã®åˆ†æ•£ | did, will, do, does | åŒã˜æ­£è§£ãŒé€£ç¶šã—ãªã„ |
| **Phase 6.7** | æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®åˆ†æ•£ | åŠ©å‹•è©, beå‹•è©, é€²è¡Œå½¢, ä¸å®šè© | å•é¡Œã®ç¨®é¡ãŒåã‚‰ãªã„ |

**ä¸¡æ–¹ãŒé€£æºã—ã¦å‹•ä½œ**:
1. Phase 6.5: æ­£è§£ãŒ `did` 3å›é€£ç¶š â†’ å›é¿
2. Phase 6.7: åŠ©å‹•è©å•é¡ŒãŒ2å›é€£ç¶š â†’ å›é¿
3. çµæœ: å¤šæ§˜ãªæ­£è§£ Ã— å¤šæ§˜ãªæ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼ = é«˜å“è³ªãªå•é¡Œã‚»ãƒƒãƒˆ

---

## ğŸ“š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆ†æçµæœ

### è‹±æ¤œ5ç´šã€œæº–2ç´šã®æ–‡æ³•é …ç›®åˆ†å¸ƒ

```
ğŸ“š åŠ©å‹•è© (5é …ç›®):
   [5] åŠ©å‹•è© can / cannot
   [4] åŠ©å‹•è© must / have to
   [4] åŠ©å‹•è© should
   [3] åŠ©å‹•è© had better

ğŸ“š beå‹•è© (3é …ç›®):
   [5] beå‹•è©
   [5] ç¾åœ¨å½¢ï¼ˆbeå‹•è©/ä¸€èˆ¬å‹•è©ï¼‰
   [4] éå»å½¢ï¼ˆbeå‹•è©ï¼‰

ğŸ“š ä¸€èˆ¬å‹•è© (2é …ç›®):
   [5] ä¸€èˆ¬å‹•è©ã®ç¾åœ¨å½¢
   [4] éå»å½¢ï¼ˆä¸€èˆ¬å‹•è©ï¼‰

ğŸ“š ç–‘å•è© (1é …ç›®):
   [5] ç–‘å•è©ç–‘å•æ–‡

ğŸ“š ä¸å®šè© (3é …ç›®):
   [4] ä¸å®šè©ï¼ˆåè©çš„ç”¨æ³•ï¼‰
   [4] ä¸å®šè©ï¼ˆå½¢å®¹è©çš„ç”¨æ³•ï¼‰
   [4] ä¸å®šè©ï¼ˆå‰¯è©çš„ç”¨æ³•ï¼‰

ğŸ“š å‹•åè© (1é …ç›®):
   [4] å‹•åè©ï¼ˆåè©çš„ç”¨æ³•ï¼‰

ğŸ“š æ¥ç¶šè© (1é …ç›®):
   [4] æ¥ç¶šè©

ğŸ“š å‰ç½®è© (1é …ç›®):
   [5] å‰ç½®è©

ğŸ“š é€²è¡Œå½¢ (3é …ç›®):
   [5] ç¾åœ¨é€²è¡Œå½¢
   [4] éå»é€²è¡Œå½¢

ğŸ“š æ¯”è¼ƒ (2é …ç›®):
   [4] æ¯”è¼ƒç´šãƒ»æœ€ä¸Šç´š
   [3] åŸç´šæ¯”è¼ƒ
```

â†’ **Phase 6.7ã¯ã“ã®å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦è¨­è¨ˆ**

---

## ğŸ¯ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

**ã€Œ4ç´šã®å•é¡Œã§æ–°ã—ã10å•ç”Ÿæˆã—ã¦ã¿ã¦ãã ã•ã„ï¼ã€**

âœ… **æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®åã‚ŠãŒå¤§å¹…ã«æ”¹å–„ã•ã‚Œã¦ã„ã¾ã™**
- åŠ©å‹•è©/beå‹•è©ãŒ3å›é€£ç¶šã§å‡ºç¾ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“
- ä¸å®šè©ã€å‹•åè©ã€æ¥ç¶šè©ã€æ¯”è¼ƒç´šãªã©ã‚‚ãƒãƒ©ãƒ³ã‚¹ã‚ˆãå‡ºé¡Œã•ã‚Œã¾ã™
- ã‚ˆã‚Šå®Ÿéš›ã®è‹±æ¤œè©¦é¨“ã«è¿‘ã„å­¦ç¿’ä½“é¨“ã‚’æä¾›ã—ã¾ã™

ğŸ”„ **æ³¨æ„äº‹é …**
- ã“ã®æ©Ÿèƒ½ã¯**æ–°ã—ãç”Ÿæˆã•ã‚Œã‚‹å•é¡Œ**ã«ã®ã¿é©ç”¨ã•ã‚Œã¾ã™
- æ—¢å­˜ã®å•é¡Œã«ã¯å½±éŸ¿ã—ã¾ã›ã‚“
- ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¦æœ€æ–°ç‰ˆã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼ˆCtrl+Shift+R ã¾ãŸã¯ Cmd+Shift+Rï¼‰

ğŸ“Š **çµ±è¨ˆæƒ…å ±ã®ç¢ºèªæ–¹æ³•**
- ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ï¼ˆF12ï¼‰ã‚’é–‹ã
- ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¿ãƒ–ã§ `ğŸ“š Grammar category stats:` ã‚’æ¤œç´¢
- æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®åˆ†å¸ƒã‚’ç¢ºèªã§ãã¾ã™

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— (Optional)

### Phase 6.8: IntegratedQuestionGenerator ã¸ã®çµ±åˆ

ç¾åœ¨ã€Phase 6.7 ã¯ `/api/eiken/generate` (å¾“æ¥ã®API) ã«ã®ã¿é©ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

Phase 3 ã®æ–°ã—ã„API `/api/eiken/questions/generate` ã«ã‚‚åŒæ§˜ã®æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ†æ•£ãƒ­ã‚¸ãƒƒã‚¯ã‚’çµ±åˆã™ã‚‹ã¨ã€ã•ã‚‰ã«å“è³ªãŒå‘ä¸Šã—ã¾ã™ã€‚

**å®Ÿè£…å†…å®¹**:
1. `IntegratedQuestionGenerator` ã« `GrammarCategoryDiversityManager` ã‚’çµ±åˆ
2. Blueprintç”Ÿæˆæ™‚ã«æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®åˆ¶ç´„ã‚’è¿½åŠ 
3. æ¤œè¨¼ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒã‚§ãƒƒã‚¯ã‚’è¿½åŠ 

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `PHASE_6_5_SUMMARY.md`: æ­£è§£é¸æŠè‚¢ã®åˆ†æ•£ç®¡ç†
- `PHASE_6_7_SUMMARY.md`: æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®åˆ†æ•£ç®¡ç†ï¼ˆã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
- `src/eiken/services/answer-diversity-manager.ts`: Phase 6.5 å®Ÿè£…
- `src/eiken/services/grammar-category-diversity-manager.ts`: Phase 6.7 å®Ÿè£…
- `src/eiken/routes/generate.ts`: APIçµ±åˆã‚³ãƒ¼ãƒ‰

---

**ã™ã¹ã¦ã®å®Ÿè£…ãŒå®Œäº†ã—ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¾ã—ãŸï¼ğŸ‰**

æ–°ã—ã„å•é¡Œã‚’ç”Ÿæˆã—ã¦ã€æ–‡æ³•ã‚«ãƒ†ã‚´ãƒªãƒ¼ã®åã‚ŠãŒæ”¹å–„ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
