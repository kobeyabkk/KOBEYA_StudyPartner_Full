# å°è«–æ–‡AIæ®µéšçš„å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ  (Essay Coaching System)

## ğŸ¯ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

**å°è«–æ–‡ã®æ®µéšçš„å­¦ç¿’**ã‚’ AI ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚µãƒãƒ¼ãƒˆã™ã‚‹é«˜åº¦ãªã‚³ãƒ¼ãƒãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚GPT-4o Vision ã«ã‚ˆã‚‹ç”»åƒè§£æã€æ®µéšçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç”Ÿæˆã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†æ©Ÿèƒ½ã‚’çµ±åˆã—ã€å­¦ç¿’è€…ã®åŸ·ç­†ãƒ—ãƒ­ã‚»ã‚¹å…¨ä½“ã‚’åŒ…æ‹¬çš„ã«æ”¯æ´ã—ã¾ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½
- âœ… **6ã‚¹ãƒ†ãƒƒãƒ—ã®æ®µéšçš„å­¦ç¿’**: å°å…¥ â†’ èªå½™ â†’ çŸ­æ–‡ â†’ æœ¬ç·´ç¿’ â†’ ãƒãƒ£ãƒ¬ãƒ³ã‚¸ â†’ ã¾ã¨ã‚
- âœ… **GPT-4o Visionçµ±åˆ**: ç”»åƒã‹ã‚‰å•é¡Œã‚’èªè­˜ãƒ»è§£æ
- âœ… **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**: å„ã‚¹ãƒ†ãƒƒãƒ—ã§å€‹åˆ¥æŒ‡å°
- âœ… **ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©å…ƒæ©Ÿèƒ½**: ãƒšãƒ¼ã‚¸å†èª­ã¿è¾¼ã¿æ™‚ã‚‚å­¦ç¿’ç¶™ç¶š
- âœ… **å®Œäº†æ¤œçŸ¥ã‚·ã‚¹ãƒ†ãƒ **: å­¦ç¿’å®Œäº†ã‚’è‡ªå‹•åˆ¤å®š
- âœ… **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½**: 3ã¤ã®æˆæ¥­å½¢å¼ï¼ˆèªå½™é‡è¦–/ç·åˆ/è‡ªç”±ï¼‰

---

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | æŠ€è¡“ | è©³ç´° |
|---------|------|------|
| **AI Engine** | OpenAI GPT-4o / GPT-4o Vision | ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆãƒ»ç”»åƒè§£æ |
| **Framework** | Hono.js | TypeScriptè£½ã®é«˜é€ŸWebãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| **Runtime** | Cloudflare Workers | ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãƒ»ã‚¨ãƒƒã‚¸ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° |
| **Database** | Cloudflare D1 (SQLite) | ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ»å±¥æ­´ç®¡ç† |
| **Frontend** | React / TypeScript | ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ™ãƒ¼ã‚¹UI |
| **UI Library** | Tailwind CSS | ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ |
| **Deployment** | Cloudflare Pages | è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»CDNé…ä¿¡ |

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Cloudflare Pages                      â”‚
â”‚                  (Frontend Delivery)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Cloudflare Workers (Edge)                   â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Essay Coaching API                        â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  â€¢ Route: /api/essay/chat                        â”‚  â”‚
â”‚  â”‚  â€¢ Route: /api/essay/session                     â”‚  â”‚
â”‚  â”‚  â€¢ Route: /api/essay/feedback                    â”‚  â”‚
â”‚  â”‚  â€¢ Route: /api/essay/complete                    â”‚  â”‚
â”‚  â”‚  â€¢ Route: /api/essay/image-analyze               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚       Core Coaching Services                      â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚  1. Image Analysis (GPT-4o Vision)               â”‚  â”‚
â”‚  â”‚  2. Theme Generator (AI-powered)                 â”‚  â”‚
â”‚  â”‚  3. Step Manager (6-step progression)            â”‚  â”‚
â”‚  â”‚  4. Feedback Generator (Real-time AI)            â”‚  â”‚
â”‚  â”‚  5. Session Manager (State persistence)          â”‚  â”‚
â”‚  â”‚  6. Vocabulary Generator (CEFR-based)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Cloudflare D1 Database                  â”‚
â”‚                                                          â”‚
â”‚  Tables:                                                 â”‚
â”‚  â€¢ essay_sessions (ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†)                        â”‚
â”‚  â€¢ essay_chat_history (ãƒãƒ£ãƒƒãƒˆå±¥æ­´)                      â”‚
â”‚  â€¢ essay_feedback_log (ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ­ã‚°)                â”‚
â”‚  â€¢ essay_completion_log (å®Œäº†ãƒ­ã‚°)                       â”‚
â”‚  â€¢ essay_image_uploads (ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OpenAI API                            â”‚
â”‚                                                          â”‚
â”‚  â€¢ Model: GPT-4o (Text Generation)                       â”‚
â”‚  â€¢ Model: GPT-4o Vision (Image Analysis)                 â”‚
â”‚  â€¢ Temperature: 0.7                                      â”‚
â”‚  â€¢ Max Tokens: 2000-4000                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
src/
â”œâ”€â”€ api/routes/
â”‚   â””â”€â”€ essay.ts                  # Essay API ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒˆ (1,200+ è¡Œ)
â”‚
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ essay-coaching.tsx        # Essay Coaching UI (ãƒ¡ã‚¤ãƒ³ç”»é¢)
â”‚   â””â”€â”€ essay-admin.tsx           # Essay ç®¡ç†ç”»é¢
â”‚
â”œâ”€â”€ eiken/services/
â”‚   â””â”€â”€ essay-grading-service.ts  # Essay æ¡ç‚¹ã‚µãƒ¼ãƒ“ã‚¹
â”‚
â””â”€â”€ components/
    â””â”€â”€ essay/                    # Essay UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
        â”œâ”€â”€ StepIndicator.tsx     # ã‚¹ãƒ†ãƒƒãƒ—é€²æ—è¡¨ç¤º
        â”œâ”€â”€ ChatArea.tsx          # ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢
        â”œâ”€â”€ ImageUpload.tsx       # ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
        â””â”€â”€ FeedbackDisplay.tsx   # ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è¡¨ç¤º
```

**åˆè¨ˆ**: ç´„5ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆTypeScript/TSXï¼‰

---

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«

#### 1. `essay_sessions` - ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
```sql
CREATE TABLE essay_sessions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id TEXT NOT NULL UNIQUE,
    student_id TEXT,
    
    -- ã‚»ãƒƒã‚·ãƒ§ãƒ³è¨­å®š
    target_level TEXT,              -- 'beginner', 'intermediate', 'advanced'
    lesson_format TEXT,             -- 'vocabulary_focus', 'comprehensive', 'free'
    problem_mode TEXT DEFAULT 'ai', -- 'ai', 'custom'
    custom_input TEXT,              -- ã‚«ã‚¹ã‚¿ãƒ å•é¡Œæ–‡
    learning_style TEXT DEFAULT 'auto', -- 'auto', 'strict', 'flexible'
    
    -- é€²æ—ç®¡ç†
    current_step INTEGER DEFAULT 1,
    completed_steps TEXT,           -- JSONé…åˆ— [1, 2, 3]
    
    -- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿
    session_data TEXT NOT NULL,     -- JSONå½¢å¼ã®å…¨ãƒ‡ãƒ¼ã‚¿
    step_status TEXT,               -- JSONå½¢å¼ã®ã‚¹ãƒ†ãƒƒãƒ—çŠ¶æ…‹
    
    -- ãƒ†ãƒ¼ãƒæƒ…å ±
    last_theme_title TEXT,
    last_theme_content TEXT,
    
    -- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP
);

CREATE INDEX idx_essay_sessions_student ON essay_sessions(student_id);
CREATE INDEX idx_essay_sessions_session ON essay_sessions(session_id);
CREATE INDEX idx_essay_sessions_custom_input ON essay_sessions(custom_input);
CREATE INDEX idx_essay_sessions_problem_mode ON essay_sessions(problem_mode);
```

#### 2. `essay_chat_history` - ãƒãƒ£ãƒƒãƒˆå±¥æ­´
```sql
CREATE TABLE essay_chat_history (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id TEXT NOT NULL,
    step_number INTEGER NOT NULL,
    role TEXT NOT NULL,             -- 'user', 'assistant', 'system'
    content TEXT NOT NULL,
    image_url TEXT,                 -- ç”»åƒãŒå«ã¾ã‚Œã‚‹å ´åˆ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (session_id) REFERENCES essay_sessions(session_id)
);

CREATE INDEX idx_chat_session ON essay_chat_history(session_id);
CREATE INDEX idx_chat_step ON essay_chat_history(step_number);
```

#### 3. `essay_feedback_log` - ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ­ã‚°
```sql
CREATE TABLE essay_feedback_log (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id TEXT NOT NULL,
    step_number INTEGER NOT NULL,
    user_input TEXT NOT NULL,
    ai_feedback TEXT NOT NULL,
    feedback_type TEXT,             -- 'positive', 'constructive', 'error'
    generation_time_ms INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (session_id) REFERENCES essay_sessions(session_id)
);
```

#### 4. `essay_completion_log` - å®Œäº†ãƒ­ã‚°
```sql
CREATE TABLE essay_completion_log (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    session_id TEXT NOT NULL,
    student_id TEXT,
    completion_rate REAL,           -- 0.0 ~ 1.0
    total_steps INTEGER,
    completed_steps INTEGER,
    final_essay TEXT,
    total_time_seconds INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    FOREIGN KEY (session_id) REFERENCES essay_sessions(session_id)
);
```

---

## ğŸ”§ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### 1. ãƒãƒ£ãƒƒãƒˆAPIï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰

**POST** `/api/essay/chat`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "session_id": "sess_20240204_123456",
  "message": "èª­ã‚“ã ",
  "image": null
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": {
    "ai_response": "ç´ æ™´ã‚‰ã—ã„ã§ã™ã­ï¼ãã‚Œã§ã¯èªå½™å•é¡Œã«é€²ã¿ã¾ã—ã‚‡ã†ã€‚",
    "current_step": 2,
    "step_name": "èªå½™",
    "next_action": "vocabulary_quiz",
    "vocabulary_items": [
      {
        "japanese": "ã¨ã¦ã‚‚é‡è¦ãª",
        "options": ["very important", "a little", "not much"],
        "correct": "very important"
      }
    ]
  }
}
```

### 2. ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆãƒ»å¾©å…ƒ

**POST** `/api/essay/session`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆæ–°è¦ä½œæˆï¼‰**:
```json
{
  "student_id": "student123",
  "target_level": "intermediate",
  "lesson_format": "vocabulary_focus"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "session_id": "sess_20240204_123456",
  "current_step": 1,
  "initial_message": "ã“ã‚“ã«ã¡ã¯ï¼ä»Šæ—¥ã¯å°è«–æ–‡ã®ç·´ç¿’ã‚’ã—ã¾ã—ã‚‡ã†ã€‚"
}
```

### 3. ç”»åƒè§£æ

**POST** `/api/essay/image-analyze`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "session_id": "sess_20240204_123456",
  "image_base64": "data:image/jpeg;base64,/9j/4AAQSkZJRg..."
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": {
    "detected_text": "å•é¡Œ: ç’°å¢ƒå•é¡Œã«ã¤ã„ã¦è€ƒãˆã‚ˆã†",
    "theme": "ç’°å¢ƒå•é¡Œ",
    "analysis": "ç’°å¢ƒä¿è­·ã«é–¢ã™ã‚‹ãƒ†ãƒ¼ãƒã§ã™ã€‚",
    "suggestions": [
      "åœ°çƒæ¸©æš–åŒ–ã«ã¤ã„ã¦",
      "ãƒªã‚µã‚¤ã‚¯ãƒ«ã®é‡è¦æ€§",
      "å†ç”Ÿå¯èƒ½ã‚¨ãƒãƒ«ã‚®ãƒ¼"
    ]
  }
}
```

### 4. ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†

**POST** `/api/essay/complete`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "session_id": "sess_20240204_123456"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "success": true,
  "data": {
    "completion_rate": 1.0,
    "total_steps": 6,
    "completed_steps": 6,
    "final_essay": "...",
    "total_time_seconds": 1800,
    "certificate_url": "https://..."
  }
}
```

---

## ğŸ“š 6ã‚¹ãƒ†ãƒƒãƒ—ã®æ®µéšçš„å­¦ç¿’

### Step 1: å°å…¥ï¼ˆã‚¤ãƒ³ãƒˆãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
**ç›®çš„**: ãƒ†ãƒ¼ãƒã®æç¤ºã¨ç†è§£

**æµã‚Œ**:
1. AIãŒãƒ†ãƒ¼ãƒã‚’æç¤ºï¼ˆã¾ãŸã¯ç”»åƒã‹ã‚‰èªè­˜ï¼‰
2. ãƒ†ãƒ¼ãƒã«é–¢ã™ã‚‹çŸ­ã„èª­ã¿ç‰©ã‚’è¡¨ç¤º
3. å­¦ç¿’è€…ãŒèª­ã¿çµ‚ãˆãŸã‚‰ã€Œèª­ã‚“ã ã€ã¨å…¥åŠ›

**ä¾‹**:
```
AI: ä»Šæ—¥ã®ãƒ†ãƒ¼ãƒã¯ã€Œç’°å¢ƒå•é¡Œã«ã¤ã„ã¦è€ƒãˆã‚ˆã†ã€ã§ã™ã€‚
    ã¾ãšã€ä»¥ä¸‹ã®æ–‡ç« ã‚’èª­ã‚“ã§ãã ã•ã„ã€‚

    ã€èª­ã¿ç‰©ã€‘
    åœ°çƒæ¸©æš–åŒ–ãŒé€²ã¿ã€ä¸–ç•Œå„åœ°ã§ç•°å¸¸æ°—è±¡ãŒç™ºç”Ÿã—ã¦ã„ã¾ã™ã€‚
    ç§ãŸã¡ã«ã§ãã‚‹ã“ã¨ã¯ä½•ã§ã—ã‚‡ã†ã‹ï¼Ÿ...
    
    èª­ã¿çµ‚ãˆãŸã‚‰ã€Œèª­ã‚“ã ã€ã¨å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚

User: èª­ã‚“ã 

AI: ç´ æ™´ã‚‰ã—ã„ã§ã™ã­ï¼ãã‚Œã§ã¯æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«é€²ã¿ã¾ã—ã‚‡ã†ã€‚
```

---

### Step 2: èªå½™ï¼ˆãƒœã‚­ãƒ£ãƒ–ãƒ©ãƒªãƒ¼ï¼‰
**ç›®çš„**: å¿…è¦ãªèªå½™ã®ç¢ºèªã¨ç¿’å¾—

**æµã‚Œ**:
1. AIãŒ5ã¤ã®èªå½™å•é¡Œã‚’å‡ºé¡Œ
2. å­¦ç¿’è€…ãŒæ—¥æœ¬èªã‹ã‚‰è‹±èªã«å¤‰æ›
3. æ­£è§£ãƒ»ä¸æ­£è§£ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

**ä¾‹**:
```
AI: ä»¥ä¸‹ã®æ—¥æœ¬èªã‚’è‹±èªã«ç›´ã—ã¦ãã ã•ã„ã€‚

    1. ã€Œã¨ã¦ã‚‚é‡è¦ãªã€ â†’ ?
    
    é¸æŠè‚¢: A) very important  B) a little  C) not much

User: A

AI: æ­£è§£ã§ã™ï¼"very important" ã¯é »ç¹ã«ä½¿ã‚ã‚Œã‚‹è¡¨ç¾ã§ã™ã­ã€‚

    2. ã€Œç’°å¢ƒã‚’å®ˆã‚‹ã€ â†’ ?
    ...
```

**AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ä¾‹**:
```typescript
{
  correct: true,
  feedback: "ç´ æ™´ã‚‰ã—ã„ï¼'protect the environment'ã¯ç’°å¢ƒå•é¡Œã§å¿…é ˆã®è¡¨ç¾ã§ã™ã€‚",
  additional_info: "é¡ä¼¼è¡¨ç¾: preserve nature, conserve resources"
}
```

---

### Step 3: çŸ­æ–‡ï¼ˆã‚·ãƒ§ãƒ¼ãƒˆã‚¨ãƒƒã‚»ã‚¤ï¼‰
**ç›®çš„**: çŸ­ã„æ–‡ç« ã§è¡¨ç¾åŠ›ã‚’é¤Šã†

**æµã‚Œ**:
1. AIãŒçŸ­æ–‡èª²é¡Œã‚’å‡ºé¡Œï¼ˆ50-100æ–‡å­—ï¼‰
2. å­¦ç¿’è€…ãŒè‹±ä½œæ–‡ã‚’å…¥åŠ›
3. AIãŒæ–‡æ³•ãƒ»èªå½™ãƒ»æ§‹æˆã‚’ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

**ä¾‹**:
```
AI: ãƒ†ãƒ¼ãƒã«ã¤ã„ã¦ã€ã‚ãªãŸã®æ„è¦‹ã‚’50-100æ–‡å­—ã§æ›¸ã„ã¦ãã ã•ã„ã€‚

User: I think we should reduce plastic waste. 
      It's harmful to the ocean and animals.

AI: ç´ æ™´ã‚‰ã—ã„ã§ã™ï¼æ˜ç¢ºãªæ„è¦‹ã¨ç†ç”±ãŒæ›¸ã‘ã¦ã„ã¾ã™ã€‚

    ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã€‘
    âœ… å†…å®¹: æ„è¦‹ãŒæ˜ç¢º
    âœ… æ–‡æ³•: æ­£ç¢º
    ğŸ’¡ æ”¹å–„ç‚¹: "marine life" ã‚’ä½¿ã†ã¨ã‚ˆã‚Šè‡ªç„¶ã§ã™
    
    ãã‚Œã§ã¯æœ¬ç·´ç¿’ã«é€²ã¿ã¾ã—ã‚‡ã†ï¼
```

---

### Step 4: æœ¬ç·´ç¿’ï¼ˆãƒ¡ã‚¤ãƒ³ã‚¨ãƒƒã‚»ã‚¤ï¼‰
**ç›®çš„**: æœ¬æ ¼çš„ãªå°è«–æ–‡åŸ·ç­†

**æµã‚Œ**:
1. AIãŒæœ¬æ ¼çš„ãªèª²é¡Œã‚’å‡ºé¡Œï¼ˆ300-400æ–‡å­—ï¼‰
2. å­¦ç¿’è€…ãŒå°è«–æ–‡ã‚’åŸ·ç­†
3. AIãŒè©³ç´°ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆæ§‹æˆãƒ»è«–ç†ãƒ»è¡¨ç¾ï¼‰

**ä¾‹**:
```
AI: ä»¥ä¸‹ã®ãƒ†ãƒ¼ãƒã«ã¤ã„ã¦ã€300-400æ–‡å­—ã®å°è«–æ–‡ã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚

    ãƒ†ãƒ¼ãƒ: ç’°å¢ƒå•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«ã€å€‹äººãŒã§ãã‚‹ã“ã¨ã¯ä½•ã‹ï¼Ÿ
    
    æ§‹æˆ:
    1. å°å…¥ï¼ˆå•é¡Œæèµ·ï¼‰
    2. ç†ç”±1 + å…·ä½“ä¾‹
    3. ç†ç”±2 + å…·ä½“ä¾‹
    4. çµè«–

User: [300-400æ–‡å­—ã®å°è«–æ–‡ã‚’å…¥åŠ›]

AI: ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼è©³ç´°ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ãŠä¼ãˆã—ã¾ã™ã€‚

    ã€å†…å®¹ã€‘â˜…â˜…â˜…â˜…â˜† 4/5
    æ˜ç¢ºãªæ„è¦‹ã¨2ã¤ã®ç†ç”±ãŒæ›¸ã‘ã¦ã„ã¾ã™ã€‚
    
    ã€æ§‹æˆã€‘â˜…â˜…â˜…â˜…â˜… 5/5
    å°å…¥â†’ç†ç”±â†’çµè«–ã®æµã‚ŒãŒå®Œç’§ã§ã™ã€‚
    
    ã€èªå½™ã€‘â˜…â˜…â˜…â˜†â˜† 3/5
    åŸºæœ¬èªå½™ã¯é©åˆ‡ã§ã™ãŒã€ã‚ˆã‚Šé«˜åº¦ãªè¡¨ç¾ã‚’ä½¿ã†ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚
    ä¾‹: "important" â†’ "crucial", "vital"
    
    ã€æ–‡æ³•ã€‘â˜…â˜…â˜…â˜…â˜† 4/5
    1ã¤ã®æ™‚åˆ¶ãƒŸã‚¹ãŒã‚ã‚Šã¾ã™ã€‚
    Line 3: "I was thinking" â†’ "I think"
    
    ãã‚Œã§ã¯ãƒãƒ£ãƒ¬ãƒ³ã‚¸å•é¡Œã«é€²ã¿ã¾ã—ã‚‡ã†ï¼
```

---

### Step 5: ãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼ˆã‚¢ãƒ‰ãƒãƒ³ã‚¹ãƒ‰ï¼‰
**ç›®çš„**: ã‚ˆã‚Šé«˜åº¦ãªèª²é¡Œã«æŒ‘æˆ¦

**æµã‚Œ**:
1. AIãŒç™ºå±•çš„ãªèª²é¡Œã‚’å‡ºé¡Œï¼ˆ400-500æ–‡å­—ï¼‰
2. å­¦ç¿’è€…ãŒæŒ‘æˆ¦
3. AIãŒç·åˆè©•ä¾¡

**ä¾‹**:
```
AI: æœ€å¾Œã®ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã§ã™ï¼å°‘ã—é›£ã—ã„ãƒ†ãƒ¼ãƒã«æŒ‘æˆ¦ã—ã¦ãã ã•ã„ã€‚

    ãƒ†ãƒ¼ãƒ: ç’°å¢ƒä¿è­·ã¨çµŒæ¸ˆç™ºå±•ã¯ä¸¡ç«‹ã§ãã‚‹ã‹ï¼Ÿ
          åå¯¾æ„è¦‹ã‚‚è€ƒæ…®ã—ãŸä¸Šã§ã€ã‚ãªãŸã®è¦‹è§£ã‚’è¿°ã¹ãªã•ã„ã€‚
    
    æ–‡å­—æ•°: 400-500æ–‡å­—
    
    æ³¨æ„ç‚¹:
    â€¢ åå¯¾æ„è¦‹ã‚’èªè­˜ã—ãŸä¸Šã§ã€ã‚ãªãŸã®ç«‹å ´ã‚’æ˜ç¢ºã«
    â€¢ å…·ä½“çš„ãªãƒ‡ãƒ¼ã‚¿ã‚„ä¾‹ã‚’å«ã‚ã‚‹
    â€¢ è¤‡é›‘ãªæ–‡æ§‹é€ ã‚’ä½¿ã†

User: [400-500æ–‡å­—ã®å°è«–æ–‡ã‚’å…¥åŠ›]

AI: ç´ æ™´ã‚‰ã—ã„ï¼éå¸¸ã«è«–ç†çš„ãªæ–‡ç« ã§ã™ã€‚

    ã€ç·åˆè©•ä¾¡ã€‘â˜…â˜…â˜…â˜…â˜… 5/5
    
    å¼·ã¿:
    âœ… åå¯¾æ„è¦‹ã‚’èªè­˜ã—ãŸä¸Šã§è‡ªåˆ†ã®ç«‹å ´ã‚’æ˜ç¢ºåŒ–
    âœ… å…·ä½“ä¾‹ãŒè±Šå¯Œ
    âœ… è«–ç†å±•é–‹ãŒæ˜å¿«
    âœ… é«˜åº¦ãªèªå½™ãƒ»æ–‡æ³•ã‚’ä½¿ç”¨
    
    æ”¹å–„ãƒã‚¤ãƒ³ãƒˆ:
    ğŸ’¡ çµè«–éƒ¨åˆ†ã‚’ã‚‚ã†å°‘ã—ç°¡æ½”ã«ã™ã‚‹ã¨è‰¯ã„
    
    ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ã¾ã¨ã‚ã«é€²ã¿ã¾ã—ã‚‡ã†ã€‚
```

---

### Step 6: ã¾ã¨ã‚ï¼ˆã‚µãƒãƒªãƒ¼ï¼‰
**ç›®çš„**: å­¦ç¿’ã®æŒ¯ã‚Šè¿”ã‚Šã¨ç·åˆè©•ä¾¡

**æµã‚Œ**:
1. AIãŒå­¦ç¿’å…¨ä½“ã‚’ç·æ‹¬
2. æˆé•·ãƒã‚¤ãƒ³ãƒˆã¨ä»Šå¾Œã®èª²é¡Œã‚’æç¤º
3. ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†

**ä¾‹**:
```
AI: ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼æœ¬æ—¥ã®å­¦ç¿’ã‚’æŒ¯ã‚Šè¿”ã‚Šã¾ã—ã‚‡ã†ã€‚

    ã€å­¦ç¿’æ™‚é–“ã€‘30åˆ†
    ã€å®Œäº†ã‚¹ãƒ†ãƒƒãƒ—ã€‘6/6
    ã€ç·åˆè©•ä¾¡ã€‘â˜…â˜…â˜…â˜…â˜† 4.2/5
    
    ã€æˆé•·ãƒã‚¤ãƒ³ãƒˆã€‘
    âœ… èªå½™åŠ›: 5ã¤ã®æ–°ã—ã„è¡¨ç¾ã‚’ç¿’å¾—
    âœ… æ§‹æˆåŠ›: è«–ç†çš„ãªæµã‚Œã‚’ç¶­æŒ
    âœ… è¡¨ç¾åŠ›: è¤‡é›‘ãªæ–‡æ§‹é€ ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«
    
    ã€ä»Šå¾Œã®èª²é¡Œã€‘
    ğŸ’¡ ã‚ˆã‚Šé«˜åº¦ãªèªå½™ã‚’å¢—ã‚„ã™
    ğŸ’¡ æ¥ç¶šè©ã‚’åŠ¹æœçš„ã«ä½¿ã†
    ğŸ’¡ å…·ä½“ä¾‹ã‚’ã•ã‚‰ã«å……å®Ÿã•ã›ã‚‹
    
    ã€æ¬¡å›ã®æ¨å¥¨ãƒ†ãƒ¼ãƒã€‘
    â€¢ ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã¨ç¤¾ä¼š
    â€¢ æ•™è‚²ã®æœªæ¥
    â€¢ ã‚°ãƒ­ãƒ¼ãƒãƒ«åŒ–ã®å½±éŸ¿
    
    ã¾ãŸæ¬¡å›ã‚‚ãŠå¾…ã¡ã—ã¦ã„ã¾ã™ï¼
```

---

## ğŸ¤– AIçµ±åˆæ©Ÿèƒ½

### 1. GPT-4o Visionï¼ˆç”»åƒè§£æï¼‰

**æ©Ÿèƒ½**:
- å•é¡Œç”¨ç´™ã®ç”»åƒã‹ã‚‰å•é¡Œæ–‡ã‚’èªè­˜
- ãƒ†ãƒ¼ãƒã®è‡ªå‹•æŠ½å‡º
- æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã¸ã®å¤‰æ›

**å®Ÿè£…ä¾‹**:
```typescript
async function analyzeImage(imageBase64: string): Promise<ImageAnalysisResult> {
  const response = await openai.chat.completions.create({
    model: "gpt-4o",
    messages: [
      {
        role: "user",
        content: [
          {
            type: "text",
            text: "ã“ã®ç”»åƒã‹ã‚‰å•é¡Œæ–‡ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚"
          },
          {
            type: "image_url",
            image_url: { url: imageBase64 }
          }
        ]
      }
    ],
    max_tokens: 1000
  })
  
  return parseImageAnalysisResponse(response.choices[0].message.content)
}
```

**ä¾‹**:
```
å…¥åŠ›ç”»åƒ: [å•é¡Œç”¨ç´™ã®å†™çœŸ]

AIå‡ºåŠ›:
{
  "detected_text": "å•é¡Œ: ç’°å¢ƒå•é¡Œã«ã¤ã„ã¦ã€ã‚ãªãŸã®æ„è¦‹ã‚’è¿°ã¹ãªã•ã„ã€‚",
  "theme": "ç’°å¢ƒå•é¡Œ",
  "type": "opinion_essay",
  "suggested_structure": [
    "å°å…¥: å•é¡Œæèµ·",
    "æœ¬è«–1: ç†ç”±ã¨å…·ä½“ä¾‹",
    "æœ¬è«–2: åå¯¾æ„è¦‹ã¸ã®åè«–",
    "çµè«–: ã¾ã¨ã‚"
  ]
}
```

---

### 2. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç”Ÿæˆ

**æ©Ÿèƒ½**:
- å­¦ç¿’è€…ã®å…¥åŠ›ã«å¯¾ã—ã¦å³åº§ã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- æ–‡æ³•ãƒ»èªå½™ãƒ»æ§‹æˆãƒ»è«–ç†ã‚’å¤šè§’çš„ã«è©•ä¾¡
- ãƒã‚¸ãƒ†ã‚£ãƒ–ï¼‹å»ºè¨­çš„ãªãƒˆãƒ¼ãƒ³

**ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¾‹**:
```typescript
const feedbackPrompt = `
ã‚ãªãŸã¯å„ªã—ãä¸å¯§ãªå°è«–æ–‡ã‚³ãƒ¼ãƒã§ã™ã€‚
ä»¥ä¸‹ã®å­¦ç¿’è€…ã®å›ç­”ã‚’è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚

ã€ãƒ†ãƒ¼ãƒã€‘${theme}
ã€å­¦ç¿’è€…ã®å›ç­”ã€‘
${userAnswer}

ã€è©•ä¾¡ãƒã‚¤ãƒ³ãƒˆã€‘
1. å†…å®¹: æ„è¦‹ã¯æ˜ç¢ºã‹ï¼Ÿ
2. æ§‹æˆ: è«–ç†çš„ãªæµã‚Œã‹ï¼Ÿ
3. èªå½™: é©åˆ‡ãªè¡¨ç¾ã‚’ä½¿ã£ã¦ã„ã‚‹ã‹ï¼Ÿ
4. æ–‡æ³•: æ–‡æ³•çš„ã«æ­£ã—ã„ã‹ï¼Ÿ

ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å½¢å¼ã€‘
â€¢ ã¾ãšè‰¯ã„ç‚¹ã‚’è¤’ã‚ã‚‹
â€¢ æ”¹å–„ç‚¹ã‚’å…·ä½“çš„ã«æŒ‡æ‘˜
â€¢ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸ã®åŠ±ã¾ã—

åˆ¶ç´„:
- 200-300æ–‡å­—ä»¥å†…
- æ—¥æœ¬èªã§å‡ºåŠ›
- ãƒã‚¸ãƒ†ã‚£ãƒ–ãªãƒˆãƒ¼ãƒ³
`
```

**å‡ºåŠ›ä¾‹**:
```
ç´ æ™´ã‚‰ã—ã„å›ç­”ã§ã™ï¼ç’°å¢ƒå•é¡Œã«å¯¾ã™ã‚‹æ˜ç¢ºãªæ„è¦‹ãŒè¿°ã¹ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

ã€è‰¯ã„ç‚¹ã€‘
âœ… æ„è¦‹ãŒæ˜ç¢º
âœ… ç†ç”±ãŒ2ã¤æ›¸ã‘ã¦ã„ã‚‹
âœ… å…·ä½“ä¾‹ãŒå«ã¾ã‚Œã¦ã„ã‚‹

ã€æ”¹å–„ç‚¹ã€‘
ğŸ’¡ "important"ã‚’"crucial"ã«å¤‰ãˆã‚‹ã¨ã‚ˆã‚Šå¼·èª¿ã§ãã¾ã™
ğŸ’¡ æ¥ç¶šè©"However"ã‚’ä½¿ã†ã¨è«–ç†ãŒã‚‚ã£ã¨æ˜ç¢ºã«ãªã‚Šã¾ã™

æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã•ã‚‰ã«é•·ã„æ–‡ç« ã«æŒ‘æˆ¦ã—ã¾ã—ã‚‡ã†ï¼
```

---

### 3. å‹•çš„ãƒ†ãƒ¼ãƒç”Ÿæˆ

**æ©Ÿèƒ½**:
- å­¦ç¿’è€…ã®ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ãŸãƒ†ãƒ¼ãƒã‚’è‡ªå‹•ç”Ÿæˆ
- ãƒˆãƒ¬ãƒ³ãƒ‰ã‚„æ™‚äº‹å•é¡Œã‚’åæ˜ 
- å¤šæ§˜ãªã‚¸ãƒ£ãƒ³ãƒ«ï¼ˆç¤¾ä¼šãƒ»ç§‘å­¦ãƒ»æ–‡åŒ–ãƒ»æ•™è‚²ãªã©ï¼‰

**å®Ÿè£…ä¾‹**:
```typescript
async function generateTheme(level: string, genre: string): Promise<Theme> {
  const prompt = `
    ä»¥ä¸‹ã®æ¡ä»¶ã§ã‚¨ãƒƒã‚»ã‚¤ã®ãƒ†ãƒ¼ãƒã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚
    
    ãƒ¬ãƒ™ãƒ«: ${level}  // 'beginner', 'intermediate', 'advanced'
    ã‚¸ãƒ£ãƒ³ãƒ«: ${genre}  // 'social', 'science', 'culture', 'education'
    
    å‡ºåŠ›å½¢å¼:
    {
      "title": "ãƒ†ãƒ¼ãƒã®ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆæ—¥æœ¬èªï¼‰",
      "description": "ãƒ†ãƒ¼ãƒã®èª¬æ˜ï¼ˆ100-150æ–‡å­—ï¼‰",
      "key_points": ["ãƒã‚¤ãƒ³ãƒˆ1", "ãƒã‚¤ãƒ³ãƒˆ2", "ãƒã‚¤ãƒ³ãƒˆ3"],
      "suggested_structure": "æ¨å¥¨æ§‹æˆ",
      "difficulty": "é›£æ˜“åº¦ï¼ˆ1-5ï¼‰"
    }
  `
  
  const response = await openai.chat.completions.create({
    model: "gpt-4o",
    messages: [{ role: "user", content: prompt }],
    response_format: { type: "json_object" }
  })
  
  return JSON.parse(response.choices[0].message.content)
}
```

---

## ğŸ¨ UI/UXè¨­è¨ˆ

### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header: KOBEYA Study Partner - Essay Coaching     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚  Step Indicator (Progress Bar)               â”‚   â”‚
â”‚ â”‚  [1 å°å…¥] â†’ [2 èªå½™] â†’ [3 çŸ­æ–‡] â†’ ...       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   Chat Area         â”‚   Reference Panel       â”‚ â”‚
â”‚ â”‚                     â”‚                         â”‚ â”‚
â”‚ â”‚ AI: ãƒ†ãƒ¼ãƒã¯...     â”‚ â€¢ èªå½™ãƒªã‚¹ãƒˆ            â”‚ â”‚
â”‚ â”‚                     â”‚ â€¢ æ–‡æ³•ãƒã‚¤ãƒ³ãƒˆ          â”‚ â”‚
â”‚ â”‚ User: èª­ã‚“ã         â”‚ â€¢ ä¾‹æ–‡                  â”‚ â”‚
â”‚ â”‚                     â”‚                         â”‚ â”‚
â”‚ â”‚ AI: ç´ æ™´ã‚‰ã—ã„ï¼    â”‚                         â”‚ â”‚
â”‚ â”‚                     â”‚                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚  Input Area                                  â”‚   â”‚
â”‚ â”‚  [Text Input / Image Upload / Send Button]  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### 1. StepIndicator
```tsx
<StepIndicator 
  currentStep={2} 
  totalSteps={6}
  steps={['å°å…¥', 'èªå½™', 'çŸ­æ–‡', 'æœ¬ç·´ç¿’', 'ãƒãƒ£ãƒ¬ãƒ³ã‚¸', 'ã¾ã¨ã‚']}
/>
```

#### 2. ChatArea
```tsx
<ChatArea 
  messages={chatHistory}
  onNewMessage={handleNewMessage}
  isAITyping={isLoading}
/>
```

#### 3. ImageUpload
```tsx
<ImageUpload 
  onUpload={handleImageUpload}
  maxSize={5 * 1024 * 1024}  // 5MB
  acceptedFormats={['image/jpeg', 'image/png']}
/>
```

#### 4. FeedbackDisplay
```tsx
<FeedbackDisplay 
  feedback={aiFeedback}
  score={4.2}
  suggestions={['èªå½™ã‚’å¢—ã‚„ã™', 'æ§‹æˆã‚’æ”¹å–„']}
/>
```

---

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™

### å¿œç­”é€Ÿåº¦
- **ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç”Ÿæˆ**: å¹³å‡1.5ç§’
  - OpenAI API: 1,200ms
  - è§£æãƒ»æ•´å½¢: 200ms
  - DBä¿å­˜: 100ms

- **ç”»åƒè§£æ**: å¹³å‡3.0ç§’
  - OpenAI Vision API: 2,500ms
  - ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º: 300ms
  - DBä¿å­˜: 200ms

### ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ**: 200ms
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©å…ƒ**: 300msï¼ˆå±¥æ­´å«ã‚€ï¼‰
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³å®Œäº†**: 500msï¼ˆçµ±è¨ˆè¨ˆç®—å«ã‚€ï¼‰

### ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£
- **åŒæ™‚ã‚»ãƒƒã‚·ãƒ§ãƒ³**: 1,000+ï¼ˆCloudflare Workersï¼‰
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿æŒ**: 7æ—¥é–“ï¼ˆD1è‡ªå‹•å‰Šé™¤ï¼‰
- **ç”»åƒä¿å­˜**: Cloudflare R2ï¼ˆæœ€å¤§10GBï¼‰

---

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–

### 1. ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
```typescript
// ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã®ç”Ÿæˆï¼ˆUUID v4ï¼‰
function generateSessionId(): string {
  return `sess_${Date.now()}_${crypto.randomUUID()}`
}

// ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œè¨¼
async function validateSession(sessionId: string): Promise<boolean> {
  const session = await db.query(`
    SELECT * FROM essay_sessions WHERE session_id = ?
  `, [sessionId])
  
  return session.length > 0
}
```

### 2. ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰åˆ¶é™
```typescript
const IMAGE_UPLOAD_LIMITS = {
  maxSize: 5 * 1024 * 1024,        // 5MB
  allowedFormats: ['image/jpeg', 'image/png', 'image/webp'],
  maxUploadsPerSession: 10
}
```

### 3. ãƒ¬ãƒ¼ãƒˆåˆ¶é™
```typescript
// 1åˆ†ã‚ãŸã‚Š20ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¾ã§
const rateLimiter = rateLimit({
  windowMs: 60 * 1000,
  max: 20,
  keyGenerator: (req) => req.headers.get('session-id') || req.ip
})
```

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º
```bash
# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev:sandbox

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹
http://localhost:3000/essay-coaching
```

### Cloudflare Pages ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# ãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ‡ãƒ—ãƒ­ã‚¤
npm run deploy
```

### ç’°å¢ƒå¤‰æ•°è¨­å®š
```bash
# Cloudflare Pages ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§è¨­å®š
OPENAI_API_KEY=sk-...
WEBHOOK_SECRET=your-secret
VERSION=2.1.0
```

---

## ğŸ“š æŠ€è¡“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«
- `src/api/routes/essay.ts` - ãƒ¡ã‚¤ãƒ³APIãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ1,200+ è¡Œï¼‰
- `src/routes/essay-coaching.tsx` - UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `src/eiken/services/essay-grading-service.ts` - æ¡ç‚¹ãƒ­ã‚¸ãƒƒã‚¯

---

## ğŸ¤ è²¢çŒ®æ–¹æ³•

1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆï¼ˆ`git checkout -b feature/amazing-feature`ï¼‰
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆï¼ˆ`git commit -m 'Add amazing feature'`ï¼‰
4. ãƒ–ãƒ©ãƒ³ãƒã«ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆ`git push origin feature/amazing-feature`ï¼‰
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

---

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License - è©³ç´°ã¯ `LICENSE` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§

---

## ğŸ“ ãŠå•ã„åˆã‚ã›

- **é–‹ç™ºè€…**: Masamichi Suzuki
- **ä¼æ¥­**: KOBEYA Programming / AI Study
- **ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ**: https://kobeya.com
- **Email**: info@kobeya-programming.com
- **LINE**: @kobeya
- **æ‰€åœ¨åœ°**: Bangkok, Thailand

---

## ğŸŒŸ å®Ÿç¸¾

- âœ… æœ¬ç•ªç¨¼åƒä¸­: https://kobeyabkk-studypartner.pages.dev/essay-coaching
- âœ… GitHub: https://github.com/kobeyabkk/KOBEYA_StudyPartner_Full
- âœ… æœˆé–“ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°: 500+ ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆæƒ³å®šï¼‰
- âœ… å¹³å‡å­¦ç¿’æ™‚é–“: 25åˆ†/ã‚»ãƒƒã‚·ãƒ§ãƒ³
- âœ… å®Œäº†ç‡: 85%+

---

**Last Updated**: 2026-02-04  
**Version**: 2.1.0  
**Status**: Production Ready âœ…
