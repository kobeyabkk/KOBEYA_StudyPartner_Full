# 英検対策システム開発 - アドバイス求む！

## やりたいこと
英検の過去問をデータベース化して、AIで類似問題を自動生成する学習システムを作りたい。

## 機能
1. 過去問DB（級別・大問別）
2. AI類似問題生成（GPT-4）
3. リスニング音声生成（TTS）
4. 学習履歴・弱点分析

## 技術
- Cloudflare Workers + D1 + R2
- React + TypeScript
- OpenAI GPT-4 + TTS

## 教えてほしいこと

### 1. DB設計これでOK？
```sql
eiken_questions (問題マスタ)
  - id, grade, section, question_text
  - choices (JSON), correct_answer
  - audio_url, grammar_points

generated_questions (生成問題)
  - original_question_id
  - question_text, choices

learning_history (学習履歴)
  - student_id, question_id
  - user_answer, is_correct
```

**気になる点**:
- JSON使っていい？（D1の互換性）
- インデックスどこに張る？
- もっといい正規化ある？

### 2. AI問題生成のコツ
**目標**: 過去問と同じレベル・形式の問題を生成

**悩み**:
- 難易度を一定に保つには？
- 選択肢をもっともらしくするには？
- プロンプトの書き方のベストプラクティスは？

### 3. リスニング音声どうする？
**選択肢**:
- OpenAI TTS（手軽、安い）
- ElevenLabs（リアル、高い）
- 人間収録（最高品質、超高い）

**質問**: 学習教材としてどれが適切？

### 4. データ投入方法
**案1**: 手動でJSON作成 → 正確だけど時間かかる
**案2**: PDF → OCR → GPT-4で構造化 → 速いけど誤認識リスク
**案3**: Web管理画面で入力 → 使いやすいけど開発コスト

どれがおすすめ？

### 5. 著作権大丈夫？
- 過去問は英検協会の著作物
- 個人・教育目的で使いたい
- 類似問題はどこまで「似せて」OK？

### 6. パフォーマンス
- 数千問のデータをどう扱う？
- AI生成の待ち時間をどう改善？
- 音声ファイルの配信最適化は？

### 7. UI/UX
- タイマー機能つける？
- 復習しやすい設計は？
- モチベーション維持の工夫は？

## 特に知りたい！
1. **DB設計**が変じゃないか確認したい
2. **AI生成の品質**を安定させるコツ
3. **データ投入**を楽にする方法

## 参考: 英検2級の構成
- リーディング38問（85分）
- リスニング30問（25分）
- ライティング1問（英作文）

## お願い
- 具体的なコード例や設計パターンがあると嬉しい
- 「こうすると失敗する」アンチパターンも知りたい
- 段階的な実装手順のアドバイスも歓迎

よろしくお願いします！🙏
