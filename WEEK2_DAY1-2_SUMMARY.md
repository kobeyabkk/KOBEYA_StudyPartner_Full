# Week 2 Day 1-2: Few-shot Examplesä»˜ãæ”¹å–„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ - å®Œæˆã‚µãƒãƒªãƒ¼

## ğŸ‰ å®Œæˆã—ã¾ã—ãŸï¼

**å®Ÿè£…æ—¥**: 2025-11-12  
**æ‰€è¦æ™‚é–“**: ç´„2æ™‚é–“  
**Git Commit**: `b83b8ec` - "feat: Week 2 Day 1-2 - Few-shot examplesä»˜ãæ”¹å–„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå®Ÿè£…"

---

## ğŸ“¦ æˆæœç‰©

### æ–°è¦å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ« (3ãƒ•ã‚¡ã‚¤ãƒ«)

| ãƒ•ã‚¡ã‚¤ãƒ« | ã‚µã‚¤ã‚º | å†…å®¹ |
|---------|--------|------|
| `src/eiken/prompts/few-shot-examples.ts` | 7.4 KB | Good/Bad/Corrected examples (12ä¾‹) |
| `src/eiken/prompts/vocabulary-constraints.ts` | 7.9 KB | A1èªå½™244èª + ç¦æ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³ |
| `src/eiken/prompts/few-shot-builder.ts` | 6.9 KB | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ |

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ« (2ãƒ•ã‚¡ã‚¤ãƒ«)

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ |
|---------|------|
| `test-few-shot-prompt.ts` | 5ã¤ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ |
| `test-vocabulary-api.sh` | 8ã¤ã®APIãƒ†ã‚¹ãƒˆ |

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ (3ãƒ•ã‚¡ã‚¤ãƒ«)

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ |
|---------|------|
| `WEEK2_FEWSHOT_PROMPT_DESIGN.md` | è¨­è¨ˆæ›¸ (6.8 KB) |
| `WEEK2_DAY1-2_COMPLETION_REPORT.md` | å®Œæˆå ±å‘Š (8.0 KB) |
| `WEEK2_DAY1-2_SUMMARY.md` | ã“ã®ãƒ•ã‚¡ã‚¤ãƒ« |

---

## âœ… å®Ÿè£…ã—ãŸæ©Ÿèƒ½

### 1. Few-shot Examples Database

**Grammar Examples**: 8ä¾‹
- âœ… Good: 4ä¾‹ï¼ˆé©åˆ‡ãªA1èªå½™ï¼‰
- âŒ Bad: 2ä¾‹ï¼ˆB1-B2èªå½™é•åï¼‰
- âœ… Corrected: 2ä¾‹ï¼ˆA1ã«ä¿®æ­£ï¼‰

**Vocabulary Examples**: 4ä¾‹
- âœ… Good: 2ä¾‹
- âŒ Bad: 1ä¾‹
- âœ… Corrected: 1ä¾‹

### 2. Vocabulary Constraints

**å®šç¾©ã—ãŸèªå½™**: 244èª
- Verbs: 50èª
- Nouns: 96èª
- Adjectives: 40èª
- Adverbs: 20èª
- Other: 38èª

**ç¦æ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³**: 7ã‚«ãƒ†ã‚´ãƒª
- Academic vocabulary
- Business terms
- Advanced verbs
- Complex adjectives
- Formal vocabulary
- Abstract nouns
- Technical terms

### 3. Prompt Builder

**2ã¤ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³**:
- Fullç‰ˆ: ~1,508 tokens (è©³ç´°ãªå­¦ç¿’ç”¨)
- Compactç‰ˆ: ~255 tokens (å®Ÿé‹ç”¨å‘ã‘ã€83%å‰Šæ¸›)

**ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹é€ **:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Vocabulary Constraints          â”‚ â† 244èªã®è¨±å¯ãƒªã‚¹ãƒˆ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Good Examples (4ä¾‹)             â”‚ â† é©åˆ‡ãªA1èªå½™ä½¿ç”¨ä¾‹
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Bad â†’ Corrected (2ãƒšã‚¢)         â”‚ â† èª¤ä¾‹ã¨ä¿®æ­£ä¾‹
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Critical Requirements (7ç‚¹)     â”‚ â† å³æ ¼ãªè­¦å‘Š
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Question Generator Integration

- Grade 5å°‚ç”¨ã§æœ‰åŠ¹åŒ–
- Compactç‰ˆã‚’ä½¿ç”¨ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³åŠ¹ç‡åŒ–ï¼‰
- æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã¨ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹ã«çµ±åˆ

---

## ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœ

### Few-shot Prompt Generation Test
```bash
$ npx tsx test-few-shot-prompt.ts

âœ… Test 1: Full promptç”ŸæˆæˆåŠŸ
âœ… Test 2: Compact promptç”ŸæˆæˆåŠŸ  
âœ… Test 3: Examplesçµ±è¨ˆ (Grammar: 8, Vocabulary: 4)
âœ… Test 4: Vocabulary constraintsæ¤œè¨¼ (244èª)
âœ… Test 5: TokenåŠ¹ç‡ (83%å‰Šæ¸›)

All tests completed successfully!
```

### Vocabulary API Test
```bash
$ bash test-vocabulary-api.sh

âœ… Test 1: ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ - 2,518èªå½™ç¢ºèª
âœ… Test 2: çµ±è¨ˆæƒ…å ± - A1ãƒ¬ãƒ™ãƒ«2,518èª
âœ… Test 3: å˜èªæ¤œç´¢ (go) - A1å‹•è©æ¤œå‡º
âœ… Test 4: å˜èªæ¤œç´¢ (delighted) - B2æœªç™»éŒ²æ¤œå‡º
âœ… Test 5: A1æ–‡ç« ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ - valid: true
âœ… Test 6: B1/B2èªå½™æ¤œå‡º - 37.5% violation
âœ… Test 7: ä¸è¦å‰‡å‹•è©æ´»ç”¨å½¢ - went/saw/ateå¯¾å¿œ
âœ… Test 8: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ - 27èªã‚­ãƒ£ãƒƒã‚·ãƒ¥

All tests completed successfully!
```

### Build Test
```bash
$ npm run build

âœ“ 44 modules transformed
dist/_worker.js  632.56 kB
âœ“ built in 760ms

Build successful!
```

---

## ğŸ¯ æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### Before (Week 1)
- èªå½™é•åå´ä¸‹ç‡: **30-40%**
- ç”ŸæˆæˆåŠŸç‡: **60-70%**
- è©¦è¡Œå›æ•°: **å¹³å‡2-3å›/å•é¡Œ**
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: æŠ½è±¡çš„æŒ‡ç¤ºã®ã¿

### After (Week 2)
- èªå½™é•åå´ä¸‹ç‡: **<10%** (ç›®æ¨™)
- ç”ŸæˆæˆåŠŸç‡: **>90%** (ç›®æ¨™)
- è©¦è¡Œå›æ•°: **å¹³å‡1.2å›/å•é¡Œ** (ç›®æ¨™)
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: 244èªã®å…·ä½“ãƒªã‚¹ãƒˆ + 12ä¾‹

### æ”¹å–„ã®ä»•çµ„ã¿

1. **å…·ä½“æ€§**: "é©åˆ‡ãªèªå½™" â†’ "244èªã®æ˜ç¤ºãƒªã‚¹ãƒˆ"
2. **å®Ÿä¾‹å­¦ç¿’**: æŠ½è±¡çš„æŒ‡ç¤º â†’ 12ã®å…·ä½“ä¾‹
3. **èª¤ã‚Šå­¦ç¿’**: æˆåŠŸä¾‹ã®ã¿ â†’ å¤±æ•—ä¾‹ã¨ä¿®æ­£ä¾‹
4. **å³æ ¼è­¦å‘Š**: ä¸€èˆ¬çš„æ³¨æ„ â†’ 7ç‚¹ã®å…·ä½“çš„è¦æ±‚

---

## ğŸ”§ æŠ€è¡“çš„ç‰¹å¾´

### 1. ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆ
```
few-shot-examples.ts        â† ãƒ‡ãƒ¼ã‚¿å®šç¾©
vocabulary-constraints.ts   â† åˆ¶ç´„å®šç¾©
few-shot-builder.ts         â† ãƒ­ã‚¸ãƒƒã‚¯
question-generator.ts       â† çµ±åˆ
```

### 2. å‹å®‰å…¨æ€§
- TypeScript interfaces
- `FewShotExample`, `VocabularyConstraints`
- å³å¯†ãªå‹ãƒã‚§ãƒƒã‚¯

### 3. ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£
- Grade 5ã§PoCå®Ÿè£…
- Grade 4-1ã¸ã®æ‹¡å¼µå®¹æ˜“
- Sectionåˆ‡ã‚Šæ›¿ãˆå¯¾å¿œ

### 4. ãƒˆãƒ¼ã‚¯ãƒ³åŠ¹ç‡
- Fullç‰ˆ: å­¦ç¿’ãƒ»é–‹ç™ºç”¨
- Compactç‰ˆ: å®Ÿé‹ç”¨å‘ã‘
- 83%å‰Šæ¸›ã§ã‚³ã‚¹ãƒˆæœ€é©åŒ–

---

## ğŸ’¡ é‡è¦ãªç™ºè¦‹

### 1. Few-shot Learningã®å¨åŠ›
- æŠ½è±¡çš„æŒ‡ç¤º < å…·ä½“ä¾‹
- æˆåŠŸä¾‹ã®ã¿ < æˆåŠŸä¾‹+å¤±æ•—ä¾‹
- ä¸€èˆ¬çš„è­¦å‘Š < å…·ä½“çš„è¦æ±‚äº‹é …

### 2. èªå½™ãƒ‡ãƒ¼ã‚¿ã®è³ª
- 2,518 A1èªå½™ï¼ˆå®Œå…¨ç¶²ç¾…ï¼‰
- CEFR-Jæº–æ‹ 
- Zipf scoreã«ã‚ˆã‚‹é »åº¦é †

### 3. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°
- 244èªã®æ˜ç¤ºçš„ãƒªã‚¹ãƒˆ
- 12ã®å…·ä½“ä¾‹ï¼ˆGood/Bad/Correctedï¼‰
- 7ç‚¹ã®å³æ ¼ãªè¦æ±‚äº‹é …

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### Week 2 Day 3-4: è‡ªå‹•ãƒªãƒ©ã‚¤ãƒˆæ©Ÿèƒ½å®Ÿè£…

**ç›®çš„**: èªå½™é•åæ¤œå‡ºæ™‚ã«è‡ªå‹•çš„ã«A1èªå½™ã¸ãƒªãƒ©ã‚¤ãƒˆ

**å®Ÿè£…è¨ˆç”»**:

```
Generated Question
  â†“
Vocabulary Validation
  â†“ (violations found)
GPT-4o Auto-Rewrite
  â†“ (use A1 vocabulary)
Re-validation
  â†“
Accept/Reject
```

**æœŸå¾…åŠ¹æœ**:
- å´ä¸‹ç‡: <10% â†’ **<2%**
- æˆåŠŸç‡: >90% â†’ **>98%**
- è©¦è¡Œå›æ•°: 1.2å› â†’ **1.05å›/å•é¡Œ**

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `src/eiken/services/vocabulary-rewriter.ts`
- `src/eiken/prompts/rewrite-prompts.ts`
- API: `POST /api/eiken/vocabulary/rewrite`

---

## ğŸ“Œ ã¾ã¨ã‚

### å®Œæˆã—ãŸæˆæœ
1. âœ… Few-shot examples (12ä¾‹)
2. âœ… Vocabulary constraints (244èª)
3. âœ… Prompt builder (Full & Compact)
4. âœ… Question generatorçµ±åˆ
5. âœ… å®Œå…¨ãªãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ
6. âœ… åŒ…æ‹¬çš„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### æŠ€è¡“çš„æˆæœ
- TypeScriptå‹å®‰å…¨å®Ÿè£…
- ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆ
- ãƒˆãƒ¼ã‚¯ãƒ³åŠ¹ç‡åŒ–ï¼ˆ83%å‰Šæ¸›ï¼‰
- ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–

### ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤
- ç”Ÿæˆå“è³ªå‘ä¸Šï¼ˆ30-40% â†’ <10%é•åç‡ï¼‰
- ã‚³ã‚¹ãƒˆå‰Šæ¸›ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³åŠ¹ç‡åŒ–ï¼‰
- é–‹ç™ºé€Ÿåº¦å‘ä¸Šï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆï¼‰
- ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ç¢ºä¿

---

**å®Ÿè£…å®Œäº†**: âœ…  
**ãƒ†ã‚¹ãƒˆ**: âœ…  
**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: âœ…  
**Git Commit**: âœ…  
**æ¬¡å›æº–å‚™**: âœ…

â†’ **Week 2 Day 3-4: è‡ªå‹•ãƒªãƒ©ã‚¤ãƒˆæ©Ÿèƒ½å®Ÿè£…ã¸é€²ã‚€æº–å‚™å®Œäº†ï¼**

---

## ğŸ“ Contact

è³ªå•ãƒ»ç›¸è«‡ãŒã‚ã‚Šã¾ã—ãŸã‚‰ã€ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š

- **è¨­è¨ˆæ›¸**: `WEEK2_FEWSHOT_PROMPT_DESIGN.md`
- **å®Œæˆå ±å‘Š**: `WEEK2_DAY1-2_COMPLETION_REPORT.md`
- **ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: `test-few-shot-prompt.ts`
- **API ãƒ†ã‚¹ãƒˆ**: `test-vocabulary-api.sh`

---

**Last Updated**: 2025-11-12  
**Status**: âœ… Completed  
**Next**: Week 2 Day 3-4 - Auto-Rewrite Implementation
